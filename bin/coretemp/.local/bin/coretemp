#!/usr/bin/env bash
# shellcheck shell=bash

has() {
    if hash "$1" &>/dev/null; then
        return 0
    fi
    return 1
}

if has sensors && has jq; then
    coretemp() {
        sensors -j | jq -r \
            'to_entries[]
                    | select(.key | startswith("coretemp-")).value
                    | to_entries[]
                    | select(.key | startswith("Core ")).value
                    | to_entries[]
                    | select(.key | endswith("input")).value'
    }
fi

coretemp

# vi: set ft=sh ts=4 sw=0 sts=-1 sr noet nosi tw=80 fdm=manual: